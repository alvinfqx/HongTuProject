<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title></title>
		<link rel="stylesheet" href="../../static/lib/scripts/jquery-ui-1.12.1.custom/jquery-ui.min.css">
		<script src="../../static/lib/scripts/jquery/jquery-1.10.2.min.js"></script>
		<script src="../../static/lib/scripts/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
		<script src="../../static/lib/cm.js"></script>
		<script src="../../static/lib/util.js"></script>
		<link href="../../static/lib/styles/font-awesome.min.css" rel="stylesheet" />
		<!--<link href="../../static/lib/scripts/plugins/jquery-ui/jquery-ui.min.css" />
		<script src="../../static/lib/scripts/plugins/jquery-ui/jquery-ui.min.js"></script>-->
		<link href="../../static/lib/scripts/bootstrap/bootstrap.min.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/bootstrap/bootstrap.min.js"></script>
		<script src="../../static/lib/scripts/plugins/layout/jquery.layout.js"></script>
		<link href="../../static/lib/scripts/plugins/tree/tree.css" rel="stylesheet" />
		<!--<link href="../../static/lib/scripts/plugins/datetime/pikaday.css" rel="stylesheet" />-->
		<!--<link href="../../static/lib/styles/learun-ui.css" rel="stylesheet" />-->
		<script src="../../static/lib/scripts/plugins/tree/tree.js"></script>
		<script src="../../static/lib/scripts/plugins/validator/validator.js"></script>
		<!--<script src="../../static/lib/scripts/utils/learun-applayout.js"></script>-->
		<script src="../../static/lib/scripts/utils/learun-clientdata.js"></script>
		<!--<script src="../../static/lib/scripts/utils/learun-flowlayout.js"></script>-->
		<!--<script src="../../static/lib/scripts/utils/learun-form.js"></script>-->
		<script src="../../static/lib/scripts/utils/learun-im.js"></script>
		<script src="../../static/lib/scripts/utils/learun-webAppData.js"></script>
		<link href="../../static/lib/scripts/plugins/jqgrid/jqgrid.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/plugins/jqgrid/grid.locale-cn.js"></script>
		<script src="../../static/lib/scripts/plugins/jqgrid/jqgrid.js"></script>
		<link href="../../static/lib/scripts/plugins/datetime/pikaday.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/plugins/datetime/pikaday.js"></script>
		<link href="../../static/lib/scripts/plugins/wizard/wizard.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/plugins/wizard/wizard.js"></script>
		<link href="../../static/lib/styles/learun-ui.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/utils/learun-ui.js"></script>
		<script src="../../static/lib/scripts/utils/learun-form.js"></script>
		<script src="../../static/lib/scripts/plugins/printTable/jquery.printTable.js"></script>
		<link href="../../static/lib/styles/learun-ckbox-radio.css" rel="stylesheet" />
		<link href="../../static/lib/styles/learun-applayout.css" rel="stylesheet" />
		<link href="../../static/lib/styles/learun-flow.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/utils/learun-applayout.js"></script>
		<script src="../../static/lib/scripts/plugins/flow-ui/flow.js"></script>
		<script src="../../static/lib/scripts/utils/learun-flowlayout.js"></script>
		<script src="../../static/lib/page_parameters.js"></script>
		<!--时间控件引用-->
		<script src="../../static/lib/scripts/plugins/datepicker/WdatePicker.js"></script>
		<!--	<script src="../../static/lib/scripts/plugins/datetime/pikaday.js"></script>-->
		<script src="../../static/lib/scripts/plugins/datepicker/lang/en.js"></script>
		<script src="../../static/lib/scripts/plugins/datepicker/lang/zh-cn.js"></script>
		<script src="../../static/lib/scripts/plugins/datepicker/lang/zh-tw.js"></script>
		<link href="../../static/lib/scripts/plugins/datepicker/skin/default/datepicker.css" rel="stylesheet" />
		<link href="../../static/lib/scripts/plugins/datepicker/skin/default/datepicker-dev.css" rel="stylesheet" />
		<link href="../../static/lib/scripts/plugins/datepicker/skin/whyGreen/datepicker.css" rel="stylesheet" />
		<link href="../../static/lib/scripts/plugins/datepicker/skin/WdatePicker.css" rel="stylesheet" />
		<script src="../../static/lib/scripts/plugins/datepicker/DatePicker.js"></script>
		<!--未知道原因报错-->
		<!--<script src="../../static/lib/scripts/plugins/datepicker/calendar.js"></script>-->
		<script src="../../static/lib/scripts/plugins/datepicker/WdatePicker.js"></script>
		<style>
			html,
			body {
				height: 100%;
				width: 100%;
			}
		</style>
	</head>

	<body>
		<button type="button" class="btn btn-w-m  button-success" onclick="submitdata()">查询</button>

		<a href="../../static/img/dog.png" download="dog.png">
			dog.png
		</a>

		<button type="button" class="btn btn-w-m  button-warn" onclick="download_img()">下载</button>

		<a href="<%=request.getContextPath()%>/ajaxDownloadServlet.do?fileName=testAjaxDownload.txt">同步下载文件</a><br />
		<a href="#" onclick="downloadFilebyAjax()">ajax下载文件</a> <br />
		<a href="#" onclick="downloadFileByForm()">模拟表单提交下载文件</a>

		<div id="imgid"></div>
		<div>
			<table id="sg1"></table>
			<div id="psg1"></div>
		</div>
	</body>
	<!--独立界面引用-->
	<script>
		var download_img = function() {
			//			 window.location.href ='http://10.33.140.95:9002/AfterSaleManage/aw_workinfo/getMyPhoto?strPathIsExist=e://MES_CAT//TankPic//Resource//Images//20180313113353-1//XQImages1//20180313113353-1.png?token=3C6B6E5AC4E6D8E5350A0185F7DA2301FCBD1385991C39A885FAC2B8357878E52454B4E14B246877';
			$.ajax({
				url: 'http://10.33.140.95:9002/AfterSaleManage/aw_workinfo/getMyPhoto?strPathIsExist=e://MES_CAT//TankPic//Resource//Images//20180313113353-1//XQImages1//20180313113353-1.png',
				type: 'get',
				data: {
					token: '3C6B6E5AC4E6D8E5350A0185F7DA2301FCBD1385991C39A885FAC2B8357878E52454B4E14B246877'
				},
				success: function(data, status, xhr) {
					var html = '<img src="' + data + '"  alt="上海鲜花港 - 郁金香" />';

					$("#imgid").html(html);
				}
			});
		}

		jQuery("#sg1").jqGrid({
			url: '/AfterSaleManage/productinfo/GetPageListByProductCat',
			datatype: "json",
			postData: {
				productCatId: '1',
				token: '3E9FBB0D9F81BF40CB4C57A4002758E7321CDA7AAC2EEADA07D1F27D7264218B51FB4DA7C675E457',
			},
			height: 190,
			colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
			colModel: [{
					name: 'productInfoId',
					index: 'productInfoId',
					width: 55
				},
				{
					name: 'productName',
					index: 'productName',
					width: 90
				},
				{
					name: 'productType',
					index: 'productType',
					width: 100
				},
				{
					name: 'amount',
					index: 'amount',
					width: 80,
					align: "right"
				},
				{
					name: 'tax',
					index: 'tax',
					width: 80,
					align: "right"
				},
				{
					name: 'total',
					index: 'total',
					width: 80,
					align: "right"
				},
				{
					name: 'note',
					index: 'note',
					width: 150,
					sortable: false
				}
			],
			rowNum: 8,
			rowList: [8, 10, 20, 30],
			pager: '#psg1',
			sortname: 'productInfoId',
			viewrecords: true,
			sortorder: "desc",
			multiselect: false,
			subGrid: false,
			caption: "Custom Icons in Subgrid",
			// define the icons in subgrid
			subGridOptions: {
				"plusicon": "ui-icon-triangle-1-e",
				"minusicon": "ui-icon-triangle-1-s",
				"openicon": "ui-icon-arrowreturn-1-e"
			},
			subGridRowExpanded: function(subgrid_id, row_id) {
				var subgrid_table_id, pager_id;
				subgrid_table_id = subgrid_id + "_t";
				pager_id = "p_" + subgrid_table_id;
				$("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table><div id='" + pager_id + "' class='scroll'></div>");
				jQuery("#" + subgrid_table_id).jqGrid({
					url: "subgrid.php?q=2&id=" + row_id,
					datatype: "xml",
					colNames: ['No', 'Item', 'Qty', 'Unit', 'Line Total'],
					colModel: [{
							name: "num",
							index: "num",
							width: 80,
							key: true
						},
						{
							name: "item",
							index: "item",
							width: 130
						},
						{
							name: "qty",
							index: "qty",
							width: 70,
							align: "right"
						},
						{
							name: "unit",
							index: "unit",
							width: 70,
							align: "right"
						},
						{
							name: "total",
							index: "total",
							width: 70,
							align: "right",
							sortable: false
						}
					],
					rowNum: 20,
					pager: pager_id,
					sortname: 'num',
					sortorder: "asc",
					height: '100%'
				});
				jQuery("#" + subgrid_table_id).jqGrid('navGrid', "#" + pager_id, {
					edit: false,
					add: false,
					del: false
				})
			}
		});
		jQuery("#sg1").jqGrid('navGrid', '#psg1', {
			add: false,
			edit: false,
			del: false
		});

		function submitdata() {
			$.ajax({
				type: "post",
				dataType: "json",
				async: false,
				data: JSON.stringify({
					rows: 8,
					page: 1,
					sord: "asc",
					queryJson: {},
					token: "C01E85BCB40603F37CF296DDADAF241A4DC941E3069C7437131B0D8B05049A0800B2D53D8E68B381"
				}),
				url: "http://39.108.5.120:8082/WMSManage/wms_stock/GetPageListJsonToken",
				success: function(data, status) {
					alert(JSON.stringify(data));
				}
			});
		}

		//开页签
		var btn = function() {
			top.tablist.newTab({
				id: "tab" + (cm.format.guid()),
				title: "产品配置",
				closed: true,
				replace: true,
				icon: "fa fa-file-text-o",
				url: "/hongtupage/view/product_attributes/configure_product_attr_edit.html?tab=true&keyValue=" + keyValue
			});
		}
	</script>

</html>